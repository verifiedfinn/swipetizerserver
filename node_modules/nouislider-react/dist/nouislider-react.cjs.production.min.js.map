{"version":3,"file":"nouislider-react.cjs.production.min.js","sources":["../src/utils.js","../src/index.js"],"sourcesContent":["const sortObjectKeys = obj =>\n  Object.entries(obj)\n    .sort()\n    .reduce((o, [k, v]) => ((o[k] = v), o), {});\n\nexport const isEqual = (val1, val2) => {\n  if (typeof val1 === \"number\" && typeof val2 === \"number\")\n    return val1 === val2;\n  if (typeof val1 === \"string\" && typeof val2 === \"string\")\n    return val1 === val2;\n  if (Array.isArray(val1) && Array.isArray(val2)) {\n    return JSON.stringify(val1) === JSON.stringify(val2);\n  }\n  if (typeof val1 === \"object\" && typeof val2 === \"object\") {\n    return (\n      JSON.stringify(sortObjectKeys(val1)) ===\n      JSON.stringify(sortObjectKeys(val2))\n    );\n  }\n  return false;\n};\n","import React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport nouislider from \"nouislider\";\n\nimport { isEqual } from \"./utils\";\n\nconst areEqual = (prevProps, nextProps) => {\n  const { start, step, disabled, range } = prevProps;\n  return (\n    nextProps.step === step &&\n    isEqual(nextProps.start, start) &&\n    nextProps.disabled === disabled &&\n    isEqual(nextProps.range, range)\n  );\n};\n\nconst Nouislider = props => {\n  const [slider, setSlider] = useState(null);\n  const sliderContainer = React.createRef();\n\n  useEffect(() => {\n    const { instanceRef } = props;\n    const isCreatedRef =\n      instanceRef &&\n      Object.prototype.hasOwnProperty.call(instanceRef, \"current\");\n    if (instanceRef && instanceRef instanceof Function) {\n      instanceRef(sliderContainer.current);\n    }\n\n    if (isCreatedRef) {\n      // eslint-disable-next-line no-param-reassign\n      instanceRef.current = sliderContainer.current;\n    }\n\n    return () => {\n      if (isCreatedRef) {\n        // eslint-disable-next-line no-param-reassign\n        instanceRef.current = null;\n      }\n    };\n  }, [sliderContainer]);\n\n  const clickOnPip = pip => {\n    const value = Number(pip.target.getAttribute(\"data-value\"));\n    if (slider) {\n      slider.set(value);\n    }\n  };\n\n  const toggleDisable = disabled => {\n    const sliderHTML = sliderContainer.current;\n    if (sliderHTML) {\n      if (!disabled) {\n        sliderHTML.removeAttribute(\"disabled\");\n      } else {\n        sliderHTML.setAttribute(\"disabled\", true);\n      }\n    }\n  };\n\n  const { onUpdate, onChange, onSlide, onStart, onEnd, onSet } = props;\n\n  const updateEvents = (sliderComponent) => {\n    if (onStart) {\n      sliderComponent.off(\"start\");\n      sliderComponent.on(\"start\", onStart);\n    }\n\n    if (onSlide) {\n      sliderComponent.off(\"slide\");\n      sliderComponent.on(\"slide\", onSlide);\n    }\n\n    if (onUpdate) {\n      sliderComponent.off(\"update\");\n      sliderComponent.on(\"update\", onUpdate);\n    }\n\n    if (onChange) {\n      sliderComponent.off(\"change\");\n      sliderComponent.on(\"change\", onChange);\n    }\n\n    if (onSet) {\n      sliderComponent.off(\"set\");\n      sliderComponent.on(\"set\", onSet);\n    }\n\n    if (onEnd) {\n      sliderComponent.off(\"end\");\n      sliderComponent.on(\"end\", onEnd);\n    }\n  }\n\n  const updateOptions = options => {\n    const sliderHTML = sliderContainer.current;\n    sliderHTML.noUiSlider.updateOptions(options);\n  };\n\n  const setClickableListeners = () => {\n    if (props.clickablePips) {\n      const sliderHTML = sliderContainer.current;\n      [...sliderHTML.querySelectorAll(\".noUi-value\")].forEach(pip => {\n        pip.style.cursor = \"pointer\";\n        pip.addEventListener(\"click\", clickOnPip);\n      });\n    }\n  };\n\n  const createSlider = () => {\n    if (sliderContainer.current.noUiSlider) return;\n\n    const sliderComponent = nouislider.create(sliderContainer.current, {\n      ...props\n    });\n\n    updateEvents(sliderComponent);\n\n    setSlider(sliderComponent);\n  };\n\n  useEffect(() => {\n    const { disabled } = props;\n    const sliderHTML = sliderContainer.current;\n    if (sliderHTML) {\n      toggleDisable(disabled);\n      createSlider();\n    }\n    return () => {\n      if (slider) slider.destroy();\n      if (sliderHTML) {\n        [...sliderHTML.querySelectorAll(\".noUi-value\")].forEach(pip => {\n          pip.removeEventListener(\"click\", clickOnPip);\n        });\n      }\n    };\n  }, []);\n\n  useEffect(() => {\n    if (slider) {\n      setClickableListeners()\n    }\n  }, [slider]);\n\n  const { start, disabled, range, step, margin, padding, limit, pips, snap, animate } = props;\n\n  useEffect(() => {\n    if (slider) {\n      updateOptions({range, step, padding, margin, limit, pips, snap, animate});\n      slider.set(start);\n      setClickableListeners()\n    }\n    toggleDisable(disabled);\n  }, [start, disabled, range, step, margin, padding, limit, pips, snap, animate]);\n\n  useEffect(() => {\n    if (slider) {\n      updateEvents(slider)\n    }\n  }, [onUpdate, onChange, onSlide, onStart, onEnd, onSet])\n\n  const { id, className, style } = props;\n  const options = {};\n  if (id) {\n    options.id = id;\n  }\n  if (className) {\n    options.className = className;\n  }\n  return <div {...options} ref={sliderContainer} style={style} />;\n};\n\nNouislider.propTypes = {\n  // https://refreshless.com/nouislider/slider-options/#section-animate\n  animate: PropTypes.bool,\n  // https://refreshless.com/nouislider/behaviour-option/\n  behaviour: PropTypes.string,\n  className: PropTypes.string,\n  clickablePips: PropTypes.bool,\n  // https://refreshless.com/nouislider/slider-options/#section-connect\n  connect: PropTypes.oneOfType([\n    PropTypes.arrayOf(PropTypes.bool),\n    PropTypes.bool\n  ]),\n  // http://refreshless.com/nouislider/slider-options/#section-orientation\n  direction: PropTypes.oneOf([\"ltr\", \"rtl\"]),\n  // https://refreshless.com/nouislider/more/#section-disable\n  disabled: PropTypes.bool,\n  format: PropTypes.object,\n  keyboardSupport: PropTypes.bool,\n  id: PropTypes.string,\n  instanceRef: PropTypes.oneOf([PropTypes.func, PropTypes.object]),\n  // https://refreshless.com/nouislider/slider-options/#section-limit\n  limit: PropTypes.number,\n  // https://refreshless.com/nouislider/slider-options/#section-margin\n  margin: PropTypes.number,\n  // https://refreshless.com/nouislider/events-callbacks/#section-change\n  onChange: PropTypes.func,\n  // https://refreshless.com/nouislider/events-callbacks/\n  onEnd: PropTypes.func,\n  // https://refreshless.com/nouislider/events-callbacks/#section-set\n  onSet: PropTypes.func,\n  // http://refreshless.com/nouislider/events-callbacks/#section-slide\n  onSlide: PropTypes.func,\n  // http://refreshless.com/nouislider/events-callbacks/\n  onStart: PropTypes.func,\n  // http://refreshless.com/nouislider/events-callbacks/#section-update\n  onUpdate: PropTypes.func,\n  // https://refreshless.com/nouislider/slider-options/#section-orientation\n  orientation: PropTypes.oneOf([\"horizontal\", \"vertical\"]),\n  // https://refreshless.com/nouislider/slider-options/#section-padding\n  padding: PropTypes.oneOfType([\n    PropTypes.number,\n    PropTypes.arrayOf(PropTypes.number)\n  ]),\n  // https://refreshless.com/nouislider/pips/\n  pips: PropTypes.object,\n  // https://refreshless.com/nouislider/slider-values/#section-range\n  range: PropTypes.object.isRequired,\n  snap: PropTypes.bool,\n  // https://refreshless.com/nouislider/slider-options/#section-start\n  start: PropTypes.oneOfType([\n    PropTypes.number,\n    PropTypes.string,\n    PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.number, PropTypes.string]))\n  ]).isRequired,\n  // https://refreshless.com/nouislider/slider-options/#section-step\n  step: PropTypes.number,\n  style: PropTypes.objectOf(PropTypes.string),\n  // https://refreshless.com/nouislider/slider-options/#section-tooltips\n  tooltips: PropTypes.oneOfType([\n    PropTypes.bool,\n    PropTypes.arrayOf(\n      PropTypes.bool,\n      PropTypes.shape({\n        from: PropTypes.func,\n        to: PropTypes.func\n      })\n    )\n  ])\n};\n\nNouislider.defaultProps = {\n  animate: true,\n  behaviour: \"tap\",\n  className: null,\n  clickablePips: false,\n  connect: false,\n  direction: \"ltr\",\n  disabled: false,\n  format: null,\n  margin: null,\n  limit: null,\n  keyboardSupport: true,\n  id: null,\n  instanceRef: null,\n  padding: 0,\n  pips: null,\n  snap: false,\n  step: null,\n  style: null,\n  orientation: \"horizontal\",\n  tooltips: false,\n  onChange: () => {},\n  onEnd: () => {},\n  onSet: () => {},\n  onSlide: () => {},\n  onStart: () => {},\n  onUpdate: () => {}\n};\n\nexport default React.memo(Nouislider, areEqual);\n"],"names":["sortObjectKeys","obj","Object","entries","sort","reduce","o","_ref","_ref2","_slicedToArray","k","v","isEqual","val1","val2","Array","isArray","JSON","stringify","_typeof","areEqual","prevProps","nextProps","start","step","disabled","range","Nouislider","props","_useState2","useState","slider","setSlider","sliderContainer","React","createRef","useEffect","instanceRef","isCreatedRef","prototype","hasOwnProperty","call","Function","current","clickOnPip","pip","value","Number","target","getAttribute","set","toggleDisable","sliderHTML","setAttribute","removeAttribute","onUpdate","onChange","onSlide","onStart","onEnd","onSet","updateEvents","sliderComponent","off","on","setClickableListeners","clickablePips","_toConsumableArray","querySelectorAll","forEach","style","cursor","addEventListener","createSlider","noUiSlider","nouislider","create","_objectSpread","destroy","removeEventListener","margin","padding","limit","pips","snap","animate","options","updateOptions","id","className","createElement","_extends","ref","defaultProps","behaviour","connect","direction","format","keyboardSupport","orientation","tooltips","index","memo"],"mappings":"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"}